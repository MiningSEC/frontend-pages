import{_ as nt,W as S,L as o,P as m,$ as s,a as st,b as N}from"./index.BnwTn5eZ.js";import{a as at,c as rt,b as it,aX as A,ae as y,B as u,bK as d,F as lt,b5 as v,af as n,N as g,bi as a,u as i}from"./@vue.CEj65B4J.js";import"./pinia.DyEYotLL.js";import"./vue-i18n.V-mnkcfJ.js";import"./@intlify.CFBz4lvk.js";import"./vue.Bt964zJg.js";import"./axios.CCb-kr4I.js";import"./qs.CHplBCRq.js";import"./side-channel.CsnL200x.js";import"./get-intrinsic.C0MK_WYI.js";import"./es-errors.DzOT6E3C.js";import"./has-symbols.eVqrYdw7.js";import"./has-proto.JnoBQRdH.js";import"./function-bind.BbkWVFrm.js";import"./hasown.DgGsgJXN.js";import"./call-bind.7ruBWERj.js";import"./set-function-length.rrBIZaM4.js";import"./define-data-property.CIp1FJ4J.js";import"./es-define-property.CCuWKFzr.js";import"./gopd.DEgEFyBv.js";import"./has-property-descriptors.BtWDufvq.js";import"./object-inspect.DozCNi1U.js";import"./numeral.DpTcJ6QL.js";import"./dayjs.BiyowgzP.js";import"./ethers.BW-Kzg1t.js";import"./@noble.CqNEeIzD.js";import"./@adraffy.-FYt1KqO.js";import"./vue-router.BQMrgPxf.js";import"./vant.Dep4x9SY.js";import"./@vant.BfKuOjy2.js";import"./vue-clipboard3.B7p_WyVT.js";import"./clipboard.CEP45nqx.js";import"./qrcode.vue.DUx8MS1K.js";const ut={class:"flex-row"},ct={class:"flex-1"},mt={class:"label-value"},dt={class:"flex-1"},pt={class:"label-value"},ft={key:0},gt={key:1},bt={class:"label-value"},_t={class:"flex-center"},vt={class:"flex-row"},wt={class:"label-value"},ht={class:"flex-center"},Bt={class:"flex-row"},kt={class:"flex-1"},Nt={class:"label-value"},xt={class:"flex-1"},St={class:"label-value"},At={__name:"white-destroy",setup(yt){const{formatUnits:p,formatPrice:_,parseUnits:I}=st,{isLogin:L,userInfo:Lt}=S,t=at({amount:void 0,profitNumber:void 0,burnAmtNumber:void 0,balanceOfNumber:void 0,quote:0n,rate:[0,0],rateUSDT:void 0,s:0,orderId:void 0,userAddress:void 0,destroyAmount:0,startBlock:0,endBlock:0,rewardPerBlock:0,claimedBlock:0,freeBlockAmountNumber:0});let r,E;const M=rt(()=>{if(t.amount&&t.rate[1]){let l=t.amount/t.rate[1];return t.amount>.01?_(l,8)+"U":void 0}else return}),q=()=>{const l=Number(p(BigInt(t.quote)*100n,18)),e=Math.ceil(l*100)/100;t.amount=e},V=()=>{t.amount=Math.floor(t.balanceOfNumber*100)/100},R=()=>{const[l,e]=t.rate;if(l===0&&e===0)return!1;t.rateUSDT?t.rateUSDT=void 0:t.rateUSDT=1/e},h=async()=>{if(!L.value)return!1;try{o.show=!0;const{provider:l}=m,e=await m.contractToken(),c=await m.constractLP(),b=await m.contractRoute(),w=await e.getPendingReward();t.profitNumber=Number(p(w,18));const B=await e.burnAmt();t.burnAmtNumber=Number(p(B,18));const k=await(await m.contractPledge()).balanceOf();t.balanceOfNumber=Number(p(k,18));const f=await b.getAmountsOut();t.rate=[Number(p(f[0],18)),Number(p(f[1],18))];const j=await c.getReserves(),{_reserve0:U,_reserve1:$}=j.toObject(),[z,K]=await c.token0()===m.USDT?[$,U]:[U,$],C=await b.quote(1,K,z);t.rate=[1,Number(p(C,18))],t.quote=C;const T=await e.userOrders();if(T){const X=await e.orders(T),[G,H,J,Q,D,P,Y]=X;t.orderId=G,t.userAddress=H,t.destroyAmount=J,t.startBlock=Q,t.endBlock=D,t.rewardPerBlock=P,t.claimedBlock=Y;const Z=await l.getBlockNumber(),tt=I(Z.toString(),0),et=D-tt,ot=BigInt(et*P),O=Number(p(ot,18));t.freeBlockAmountNumber=Math.ceil(O),console.log("BlofreeBlockAmountNumberckNumber",O)}o.show=!1}catch(l){console.log("eerr",l),o.show=!1}};S.emit=h,it(()=>{S.emit=async()=>{},clearInterval(E)}),L.value&&h();const W=async()=>{o.show=!0,o.timerOut=!1;try{if(typeof t.amount!="number")return o.msgList.push({msg:s("lang072"),err:1}),o.isButton=!0,!1;const l=Number(p(BigInt(t.quote)*100n,18));if(t.amount<l)return o.msgList.push({msg:`${s("lang131")}100USDT,
 ${s("lang022")}:${l.toFixed(2)}`,err:1}),o.isButton=!0,!1;const{provider:e}=m,c=await e.getSigner(),b=await m.contractPledge(c);r=new N,o.msgList.push({msg:`${t.amount} ${s("lang005")}`,status:r.status});const w=await b.transfer(t.amount);r=new N(r),o.msgList.push({msg:`${t.amount} ${s("lang003")}`,status:r.status}),await w.wait(),r.onClose(),o.msgList.push({msg:`${t.amount} ${s("lang004")}`}),o.show=!1,h()}catch{r==null||r.onErr(),o.msgList.push({msg:s("lang049"),err:1}),o.isButton=!0}},F=async()=>{o.show=!0,o.timerOut=!1;try{if(t.profitNumber<=0)return o.msgList.push({msg:s("lang113"),err:1}),o.isButton=!0,!1;const{provider:l}=m,e=await l.getSigner(),c=await m.contractPledge(e);r=new N,o.msgList.push({msg:s("lang059"),status:r.status});const b=await c.transfer(0);r=new N(r),o.msgList.push({msg:s("lang066"),status:r.status}),await b.wait(),r.onClose(),o.msgList.push({msg:s("lang067")}),o.show=!1,h()}catch{r==null||r.onErr(),o.msgList.push({msg:s("lang049"),err:1}),o.isButton=!0}};return(l,e)=>{const c=v("app-space"),b=v("van-icon"),w=v("app-input"),B=v("app-button"),x=v("hb-unlink"),k=v("hb-card-down");return A(),y(lt,null,[u(k,null,{hide:d(()=>[n("div",ut,[n("div",ct,[g(a(i(s)("lang131"))+" ",1),e[6]||(e[6]=n("div",{class:"label-value"}," 100 USDT ",-1)),u(c),n("div",null,[g(" SEC"+a(i(s)("lang120"))+" ",1),n("div",mt,a(i(_)(t.balanceOfNumber)),1)])]),n("div",dt,[g(a(i(s)("lang038"))+" ",1),u(b,{name:"exchange",size:"14px",onClick:e[0]||(e[0]=f=>R())}),n("div",pt,[t.rateUSDT?(A(),y("span",ft,"1 SEC : "+a(i(_)(t.rateUSDT,8))+" USDT",1)):(A(),y("span",gt,a(t.rate[0])+" USDT : "+a(i(_)(t.rate[1]))+" SEC",1))])])]),n("div",null,[n("div",null,[g(a(i(s)("lang023"))+" ",1),n("span",bt,a(M.value),1)]),u(w,{min:0,type:"number",modelValue:t.amount,"onUpdate:modelValue":e[3]||(e[3]=f=>t.amount=f),placeholder:i(s)("lang073")},{befor:d(()=>[n("div",{class:"input-tag tag-min",onClick:e[1]||(e[1]=f=>q())},"Min")]),after:d(()=>[n("div",{class:"input-tag tag-max",onClick:e[2]||(e[2]=f=>V())},"Max")]),_:1},8,["modelValue","placeholder"])]),u(c),n("div",_t,[u(x,{"is-button":"","is-white":""},{default:d(()=>[u(B,{width:"150px",onClick:e[4]||(e[4]=f=>W())},{default:d(()=>[g(a(i(s)("lang110")),1)]),_:1})]),_:1})])]),default:d(()=>[g(a(i(s)("lang111"))+" ",1)]),_:1}),u(c),u(k,null,{hide:d(()=>[n("div",vt,[n("div",null,[g(a(i(s)("lang057"))+" ",1),n("div",wt,a(i(_)(t.profitNumber)),1)]),e[7]||(e[7]=n("div",{class:"flex-1"},null,-1)),n("div",ht,[u(x,{"is-button":"","is-white":""},{default:d(()=>[u(B,{width:"100px",disabled:t.profitNumber<=0,onClick:e[5]||(e[5]=f=>F())},{default:d(()=>[g(a(i(s)("lang065")),1)]),_:1},8,["disabled"])]),_:1})])]),u(c),n("div",Bt,[n("div",kt,[n("div",null,a(i(s)("lang026")),1),n("div",Nt,a(i(_)(t.burnAmtNumber)),1)]),n("div",xt,[n("div",null,a(i(s)("lang145")),1),n("div",St,a(i(_)(t.freeBlockAmountNumber)),1)])])]),default:d(()=>[g(a(i(s)("lang112"))+" ",1)]),_:1})],64)}}},le=nt(At,[["__scopeId","data-v-493cd603"]]);export{le as default};
