import{_ as D,W as m,A as T,$ as e,l as U,a as E,m as F,L as o,b as g}from"./index.BnwTn5eZ.js";import{a as I,b as V,aX as k,ae as $,B as r,bK as d,F as P,b5 as _,af as s,N as x,bi as c,u as l,ac as R}from"./@vue.CEj65B4J.js";import"./pinia.DyEYotLL.js";import"./vue-i18n.V-mnkcfJ.js";import"./@intlify.CFBz4lvk.js";import"./vue.Bt964zJg.js";import"./axios.CCb-kr4I.js";import"./qs.CHplBCRq.js";import"./side-channel.CsnL200x.js";import"./get-intrinsic.C0MK_WYI.js";import"./es-errors.DzOT6E3C.js";import"./has-symbols.eVqrYdw7.js";import"./has-proto.JnoBQRdH.js";import"./function-bind.BbkWVFrm.js";import"./hasown.DgGsgJXN.js";import"./call-bind.7ruBWERj.js";import"./set-function-length.rrBIZaM4.js";import"./define-data-property.CIp1FJ4J.js";import"./es-define-property.CCuWKFzr.js";import"./gopd.DEgEFyBv.js";import"./has-property-descriptors.BtWDufvq.js";import"./object-inspect.DozCNi1U.js";import"./numeral.DpTcJ6QL.js";import"./dayjs.BiyowgzP.js";import"./ethers.BW-Kzg1t.js";import"./@noble.CqNEeIzD.js";import"./@adraffy.-FYt1KqO.js";import"./vue-router.BQMrgPxf.js";import"./vant.Dep4x9SY.js";import"./@vant.BfKuOjy2.js";import"./vue-clipboard3.B7p_WyVT.js";import"./clipboard.CEP45nqx.js";import"./qrcode.vue.DUx8MS1K.js";const q=""+new URL("../png/USDT.DWhOmRk5.png",import.meta.url).href,K={class:"flex-row"},M={class:"flex-1 flex-col"},X={class:"flex-row"},j={class:"hb-card-content"},z={class:"flex-1 flex-row"},G=["src"],H={class:"label-value"},J={class:"v-progress"},Q={class:"flex-row flex-center"},Y={key:1},Z={class:"flex-row"},tt={class:""},st={class:""},ot={class:"flex-label"},nt=["src"],et={class:"flex-label"},it={class:"label-value"},at={class:"flex-label"},lt={class:"label-value"},rt={__name:"white-index",setup(ct){const{formatUnits:y,formatPrice:v}=E,{miner_bg:C}=F,{isLogin:S}=m,i=I({count:0,progress:0,sum:1e3,isActive:!1});let n;const A=async()=>{const t=await(await m.contractWhite()).isActive();i.isActive=t},B=()=>{T.progress().then(a=>{if((a==null?void 0:a.code)===200){const{data:t}=a;i.count=t.count,i.progress=(t==null?void 0:t.progress)||0,i.sum=t.sum}}),S.value&&A()};m.emit=()=>{B()},B(),V(()=>{m.emit=()=>{}});const N=async()=>{o.buttonOkCel=!1,o.onOk=void 0;try{const{provider:a}=m,t=await a.getSigner(),u=await(await m.contractWhite(t)).IDO();n=new g(n),o.msgList.push({msg:e("lang033"),status:n.status}),u.wait(),n=new g(n),o.msgList.push({msg:e("lang103")}),i.isActive=!0,n.onClose(),o.isButton=!0}catch{n==null||n.onErr(),o.msgList.push({msg:e("lang049"),err:1}),o.isButton=!0}},O=async()=>{if(o.show=!0,o.timerOut=!1,i.count>=i.sum)return o.msgList.push({msg:"max number",err}),o.isButton=!0,!1;try{n=new g;const a=await m.contractWhite(),t=await a.isActive();if(console.log("isActive",t),t)return o.msgList.push({msg:e("lang027")}),o.isButton=!0,!1;const p=await a.balanceOf(),u=Number(y(p,18));if(console.log("usdt",u),u<100)return o.msgList.push({msg:`${e("lang006")}:${u}`,err:1}),o.isButton=!0,!1;o.msgList.push({msg:`USDT:${u}`});const b=await a.allowance(),f=Number(y(b,18));o.msgList.push({msg:`${e("lang016")}:${f},${e("lang115")}:100`});const{provider:w}=m,h=await w.getSigner();if(f<100){n=new g;const L=await m.contractWhite(h);o.msgList.push({msg:e("lang060"),status:n.status});const W=await L.approve(100);n=new g(n),o.msgList.push({msg:e("lang033"),status:n.status}),await W.wait(),n.onClose(),o.msgList.push({msg:e("lang091")})}else o.msgList.push({msg:e("lang092")});n=new g(n),o.msgList.push({msg:e("lang034"),status:n.status}),o.textOk="lang063",o.onOk=async()=>{await N()},o.buttonOkCel=!0}catch(a){console.log("err",a),n==null||n.onErr(),o.msgList.push({msg:e("lang049"),err:1}),o.isButton=!0}};return(a,t)=>{const p=_("app-space"),u=_("van-rolling-text"),b=_("van-progress"),f=_("app-button"),w=_("hb-unlink"),h=_("hb-card-down");return k(),$(P,null,[r(p),r(h,null,{hide:d(()=>[s("div",H,[r(u,{style:{color:"aquamarine"},"start-num":0,"target-num":i.count,direction:"up"},null,8,["target-num"]),x(" /"+c(l(v)(Number(i.sum),0)),1)]),r(p),s("div",J,[r(b,{"stroke-width":"38px",style:{width:"100%"},percentage:i.progress,"pivot-text":`${l(v)(i.progress,1)}%`,"pivot-color":"#7232dd","track-color":"rgba(0,0,0,0.5)",color:"linear-gradient(to right, #C94962, #1E21FA)"},null,8,["percentage","pivot-text"])]),r(p),s("div",Q,[r(w,{"is-button":"","is-white":"",onOnLogin:t[1]||(t[1]=L=>A())},{default:d(()=>[i.isActive?(k(),$("span",Y,c(l(e)("lang028")),1)):(k(),R(f,{key:0,disabled:i.count>=1e3,width:"150px",onClick:t[0]||(t[0]=L=>O())},{default:d(()=>[x(c(l(e)("lang093")),1)]),_:1},8,["disabled"]))]),_:1})])]),default:d(()=>[s("div",K,[s("div",M,[t[2]||(t[2]=s("div",{class:"flex-1"},null,-1)),s("div",X,"SEC "+c(l(e)("lang077")),1),r(p),s("div",j,c(l(e)("lang056")),1),t[3]||(t[3]=s("div",{class:"flex-1"},null,-1))]),s("div",z,[t[4]||(t[4]=s("div",{class:"flex-1"},null,-1)),s("img",{height:"120px",src:l(C)[1]},null,8,G)])])]),_:1}),r(p),r(h,{class:"sub-white"},{hide:d(()=>[s("div",tt,c(l(e)("lang069")),1),t[9]||(t[9]=s("div",{class:"flex-label"},[s("span",{class:"label-value"},"100"),s("div",{class:"flex-1"}),s("img",{class:"index-icon",style:{height:"30px"},src:q})],-1)),s("div",st,c(l(e)("lang051"))+"(SEC) ",1),s("div",ot,[t[5]||(t[5]=s("span",{class:"label-value"},"???",-1)),t[6]||(t[6]=s("div",{class:"flex-1"},null,-1)),s("img",{class:"index-icon",style:{height:"30px"},src:l(U)},null,8,nt)]),r(p,{padding:"10px"}),s("div",et,[x(c(l(e)("lang058"))+" ",1),t[7]||(t[7]=s("div",{class:"flex-1"},null,-1)),s("span",it,c(l(v)(i.progress))+"%",1)]),r(p,{padding:"10px"}),s("div",at,[x(c(l(e)("lang130"))+" ",1),t[8]||(t[8]=s("div",{class:"flex-1"},null,-1)),s("span",lt,c(l(v)(Number(i.sum),0)),1)])]),default:d(()=>[s("div",Z,c(l(e)("lang008")),1)]),_:1})],64)}}},Kt=D(rt,[["__scopeId","data-v-0b56e9af"]]);export{Kt as default};
